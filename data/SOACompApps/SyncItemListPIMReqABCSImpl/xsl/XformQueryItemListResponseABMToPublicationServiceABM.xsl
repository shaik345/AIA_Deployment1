<?xml version = '1.0' encoding = 'UTF-8'?>
<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
  <mapSources>
    <source type="WSDL">
      <schema location="http://sdc60004sems.us.oracle.com:7802/orabpel/default/QueryItemListPIMAdapter/1.0/QueryItemListPIMAdapter?wsdl"/>
      <rootElement name="QueryItemListPIMAdapterProcessResponse" namespace="http://xmlns.oracle.com/PIM/QueryItemListPIMAdapter"/>
    </source>
  </mapSources>
  <mapTargets>
    <target type="WSDL">
      <schema location="oramds:/apps/AIAMetaData/AIAComponents/ApplicationObjectLibrary/PIM/V1/wsdls/PublicationService_Service.wsdl"/>
      <rootElement name="PublicationService_UpdatePublicationStatus" namespace="http://xmlns.oracle.com/apps/ego/pubfwk/service"/>
    </target>
  </mapTargets>
  <!-- GENERATED BY ORACLE XSL MAPPER 10.1.3.4.0(build 080718.0645) AT [MON NOV 09 21:19:27 IST 2009]. -->
?>
<xsl:stylesheet version="1.0" xmlns:bpelcommon="http://schemas.oracle.com/service/bpel/common" xmlns:plnk="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:ehdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.esb.server.headers.ESBHeaderFunctions" xmlns:ns6="http://xmlns.oracle.com/apps/bom/structure/service/in" xmlns:ns0="http://www.w3.org/2001/XMLSchema" xmlns:ns2="http://xmlns.oracle.com/FndSecurity" xmlns:ns11="http://xmlns.oracle.com/svc/expression" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:tns2="http://xmlns.oracle.com/apps/fnd/ServiceBean" xmlns:ns3="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/Common/V2" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:item="http://xmlns.oracle.com/apps/ego/item/service" xmlns:ns4="http://xmlns.oracle.com/apps/bom/structure/service/out" xmlns:ns5="urn:oasis:names:tc:xacml:2.0:policy:schema:cd:04" xmlns:common="http://xmlns.oracle.com/EnterpriseObjects/Core/Common/V2" xmlns:ns8="http://xmlns.oracle.com/apps/ego/item/service/out" xmlns:ns9="http://xmlns.oracle.com/apps/ego/item/service/in" xmlns:ns13="http://xmlns.oracle.com/svc" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:ns10="http://xmlns.oracle.com/oracle/apps/ego/pubfwk/service/PublicationService" xmlns:tns1="http://xmlns.oracle.com/apps/ego/pubfwk/service" xmlns:tns="http://xmlns.oracle.com/PIM/QueryItemListPIMAdapter" xmlns:itmser="http://xmlns.oracle.com/QueryItemListPIMAdapter" xmlns:ns7="http://schemas.xmlsoap.org/ws/2003/03/addressing" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:ns1="urn:oasis:names:tc:xacml:2.0:context:schema:cd:04" xmlns:ns12="http://xmlns.oracle.com/svc/description" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" exclude-result-prefixes="xsl bpelcommon plnk ns6 ns0 ns2 ns3 item ns4 ns5 common ns8 ns9 tns itmser ns7 soap ns1 ns11 tns2 ns13 ns10 tns1 ns12 ehdr xp20 ora orcl bpws hwf xref ids" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue">


  <xsl:param name="ListofTargetSystems"/>
  <xsl:variable name="ListofTargetSystemsVar" select="orcl:parseEscapedXML($ListofTargetSystems)"/>
  <xsl:param name="BatchID"/>

  <xsl:template match="/">
    <tns1:PublicationService_UpdatePublicationStatus>
      <statusInputParams>
        <Mode>
          <xsl:text disable-output-escaping="no">2</xsl:text>
        </Mode>
        <BatchEntityStatus>
          <BatchId>
            <xsl:value-of select="$BatchID"/>
          </BatchId>
          <xsl:for-each select="$ListofTargetSystemsVar/TargetSystem"> 
            <ListofSystemsEntities>
              <SystemCode>
               <xsl:value-of select="SystemCode"/>
              </SystemCode>
              <xsl:message>System Code :  <xsl:value-of select="SystemCode"/></xsl:message>
              <xsl:for-each select="/tns:QueryItemListPIMAdapterProcessResponse/item:ItemQueryOut/listOfItems/Item">
                <xsl:message>Item Code :    <xsl:value-of select="MainCharacteristics/InventoryItemId"/></xsl:message>
                <ListofEntitiesStatus>
                  <PK1Value>
                    <xsl:value-of select="MainCharacteristics/InventoryItemId"/>
                  </PK1Value>
                  <PK2Value>
                    <xsl:value-of select="MainCharacteristics/OrganizationId"/>
                  </PK2Value>
                  <PK3Value>
                    <xsl:value-of select="ItemRevision/RevisionId"/>
                  </PK3Value>
                  <StatusCode>
                    <xsl:text disable-output-escaping="no">I</xsl:text>
                  </StatusCode>
                  <Message>
                  </Message>
                </ListofEntitiesStatus>
              </xsl:for-each>
            </ListofSystemsEntities>
           </xsl:for-each> 
        </BatchEntityStatus>
      </statusInputParams>
    </tns1:PublicationService_UpdatePublicationStatus>
</xsl:template>

    <xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>  
  </xsl:template>


</xsl:stylesheet>
