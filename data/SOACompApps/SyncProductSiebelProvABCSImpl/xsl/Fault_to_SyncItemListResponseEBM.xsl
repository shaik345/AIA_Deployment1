<?xml version = '1.0' encoding = 'UTF-8'?>
<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
  <mapSources>
    <source type="XSD">
      <schema location="oramds:/apps/AIAMetaData/AIAComponents/EnterpriseObjectLibrary/Core/Common/V2/Meta.xsd" />
      <rootElement name="Fault" namespace="http://xmlns.oracle.com/EnterpriseObjects/Core/Common/V2" />
    </source>
  </mapSources>
  <mapTargets>
    <target type="XSD">
      <schema location="oramds:/apps/AIAMetaData/AIAComponents/EnterpriseObjectLibrary/Core/EBO/Item/V2/ItemEBM.xsd" />
      <rootElement name="SyncItemListResponseEBM" namespace="http://xmlns.oracle.com/EnterpriseObjects/Core/EBO/Item/V2" />
    </target>
  </mapTargets>
  <!-- GENERATED BY ORACLE XSL MAPPER 10.1.3.3.0(build 070615.0525) AT [SUN MAR 16 12:34:03 IST 2008]. -->
?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:aia="http://www.oracle.com/XSL/Transform/java/oracle.apps.aia.core.xpath.AIAFunctions" xmlns:ehdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.esb.server.headers.ESBHeaderFunctions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:corecomEBO="http://xmlns.oracle.com/EnterpriseObjects/Core/CommonEBO/V1" xmlns:coreEBOcust="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/CommonEBO/V1" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:corecomcust="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/Common/V2" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:xacml="urn:oasis:names:tc:xacml:2.0:policy:schema:cd:04" xmlns:corecom="http://xmlns.oracle.com/EnterpriseObjects/Core/Common/V2" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:coreeboitem="http://xmlns.oracle.com/EnterpriseObjects/Core/EBO/Item/V2" xmlns:svcdoc="http://xmlns.oracle.com/Services/Documentation/V1" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:wsa="http://schemas.xmlsoap.org/ws/2003/03/addressing" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:coreitemcust="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/EBO/Item/V2" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:xacml-context="urn:oasis:names:tc:xacml:2.0:context:schema:cd:04" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:xsdLocal1="http://www.siebel.com/xml/SWIProductIntegrationIO" version="1.0" exclude-result-prefixes="xsl tns xsd soapenc soap xsdLocal1 corecomEBO coreEBOcust corecomcust xacml corecom coreeboitem svcdoc wsa coreitemcust xacml-context ehdr xp20 ora orcl bpws hwf xref ids" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue">

 <!--xsl:param name="EBMHeaderParam"/-->
 
   <xsl:param name="EBMHeaderParam"/>
   <xsl:param name="ReqEBMParam"/>
 
   <xsl:variable name="EBMHeaderVariable" select="orcl:parseEscapedXML($EBMHeaderParam)"/>
                
  <xsl:variable name="EBMDataAreaVariable" select="orcl:parseEscapedXML($ReqEBMParam)"/>
                
  <xsl:variable name="TargetID" select="$EBMHeaderVariable/corecom:Sender/corecom:ID"/>                 

  <xsl:variable name="TargetServiceName" select="$EBMHeaderVariable/corecom:Sender/corecom:WSAddress/wsa:ReplyTo/wsa:ServiceName"/>
                
  <xsl:variable name="systemId" select="$EBMHeaderVariable/corecom:Target/corecom:ID"/>
  <xsl:variable name="senderSystemId" select="$EBMHeaderVariable/corecom:Sender/corecom:ID"/>
                
  <xsl:template match="/">
  
     <coreeboitem:SyncItemListResponseEBM>
      <corecom:EBMHeader>
        <xsl:variable name="messageIDVariable" select="orcl:generate-guid()"/>
        <corecom:EBMID>
          <xsl:value-of select="$messageIDVariable"/>
        </corecom:EBMID>
        <corecom:EBMName>
          <xsl:text disable-output-escaping="no">{http://xmlns.oracle.com/ABCSImpl/Core/Item/V2}Item}SyncItemListResponseEBM</xsl:text>
        </corecom:EBMName>
        <corecom:EBOName>
          <xsl:text disable-output-escaping="no">{http://xmlns.oracle.com/ABCSImpl/Industry/Core/ItemComposition/V1}Item</xsl:text>
        </corecom:EBOName>
        <corecom:CreationDateTime>
          <xsl:value-of select="xp20:current-dateTime()"/>
        </corecom:CreationDateTime>
        <corecom:RequestEBMID>
          <xsl:value-of select="$EBMHeaderVariable/corecom:EBMID"/>
        </corecom:RequestEBMID>
        <corecom:VerbCode>
          <xsl:text disable-output-escaping="no">Sync</xsl:text>
        </corecom:VerbCode>
        <corecom:MessageProcessingInstruction>
          <xsl:variable name="ConfigServiceName" select="'{http://xmlns.oracle.com/ABCSImpl/Siebel/Core/SyncProductSiebelProvABCSImpl/V1}SyncProductSiebelProvABCSImpl'"/>
          <xsl:variable name="RouteToCAVS" select="aia:getServiceProperty($ConfigServiceName, 'Routing.ItemResponseEBSV2.SyncItemListResponse.RouteToCAVS', false())='true'"/>
          <corecom:EnvironmentCode>
            <xsl:choose>
              <xsl:when test="$RouteToCAVS">
                <xsl:text>CAVS</xsl:text>
              </xsl:when>
              <xsl:otherwise>
                <xsl:variable name="EnvCode" select="aia:getServiceProperty($ConfigServiceName, 'Routing.ItemResponseEBSV2.SyncItemListResponse.MessageProcessingInstruction.EnvironmentCode', false())"/>
                <xsl:choose>
                  <xsl:when test="$EnvCode!=''">
                    <xsl:value-of select="$EnvCode"/>
                  </xsl:when>
                  <xsl:otherwise>
                    <xsl:text>PRODUCTION</xsl:text>
                  </xsl:otherwise>
                </xsl:choose>
              </xsl:otherwise>
            </xsl:choose>
          </corecom:EnvironmentCode>
          <xsl:if test="$RouteToCAVS">
            <corecom:DefinitionID>
              <xsl:value-of select="aia:getServiceProperty($ConfigServiceName, 'Routing.ItemResponseEBSV2.SyncItemListResponse.CAVS.EndpointURI', false())"/>
            </corecom:DefinitionID>
          </xsl:if>
          <corecom:InstanceID>
            <xsl:value-of select="$EBMHeaderVariable/corecom:MessageProcessingInstruction/corecom:InstanceID"/>
          </corecom:InstanceID>
        </corecom:MessageProcessingInstruction>
        <corecom:Sender>
          <xsl:variable name="senderNodeVariable" select="aia:getEBMHeaderSenderSystemNode($systemId,'')"/>
          <corecom:ID>
            <xsl:value-of select="$senderNodeVariable/ID"/>
          </corecom:ID>
          <corecom:Description>
            <xsl:value-of select="$senderNodeVariable/Description"/>
          </corecom:Description>
          <corecom:IPAddress>
            <xsl:value-of select="$senderNodeVariable/IPAddress"/>
          </corecom:IPAddress>
          <corecom:CallingServiceName>
            <xsl:text disable-output-escaping="no">ItemEBSV2</xsl:text>
          </corecom:CallingServiceName>
          <corecom:Application>
            <corecom:ID>
              <xsl:value-of select="$senderNodeVariable/Application/ID"/>
            </corecom:ID>
            <corecom:Version>
              <xsl:value-of select="$senderNodeVariable/Application/Version"/>
            </corecom:Version>
          </corecom:Application>
          <corecom:ContactName>
            <xsl:value-of select="$senderNodeVariable/ContactName"/>
          </corecom:ContactName>
          <corecom:ContactEmail>
            <xsl:value-of select="$senderNodeVariable/ContactEmail"/>
          </corecom:ContactEmail>
          <corecom:ContactPhoneNumber>
            <xsl:value-of select="$senderNodeVariable/ContactPhone"/>
          </corecom:ContactPhoneNumber>
        </corecom:Sender>
       <corecom:Target>
           <corecom:ID> <xsl:value-of select="$TargetID"/> </corecom:ID>
           <corecom:ServiceName>
               <xsl:copy-of select="$TargetServiceName"/>
            </corecom:ServiceName>
           <corecom:ApplicationTypeCode>
             <xsl:value-of select="aia:getSystemType($TargetID)"/>
           </corecom:ApplicationTypeCode> 
        </corecom:Target>        
        <corecom:BusinessScope>
          <xsl:variable name="processIDVariable" select="orcl:generate-guid()"/>
          <corecom:ID/>
          <corecom:InstanceID>
            <xsl:text disable-output-escaping="no">EBIZ-to-Siebel-Product-Synchronization-Response</xsl:text>
          </corecom:InstanceID>
          <corecom:BusinessScopeTypeCode>
            <xsl:text disable-output-escaping="no">BusinessProcessBusinessProcessMessage</xsl:text>
          </corecom:BusinessScopeTypeCode>
          <corecom:EnterpriseServiceName>
            <xsl:text disable-output-escaping="no">ItemEBSItemEBS</xsl:text>
          </corecom:EnterpriseServiceName>
          <corecom:EnterpriseServiceOperationName>
            <xsl:text disable-output-escaping="no">SyncSync</xsl:text>
          </corecom:EnterpriseServiceOperationName>
        </corecom:BusinessScope>
          
        <corecom:EBMTracking>
          <corecom:SequenceNumber>
            <xsl:value-of select="1.0"/>
          </corecom:SequenceNumber>
          <corecom:ExecutionUnitName>
            <xsl:text disable-output-escaping="no">SyncProductSiebelProvABCSImpl.bpel</xsl:text>
          </corecom:ExecutionUnitName>
          <corecom:ImplementationCode>
            <xsl:text disable-output-escaping="no">BPEL</xsl:text>
          </corecom:ImplementationCode>
          <corecom:ActivityDateTime>
            <xsl:value-of select="xp20:current-dateTime()"/>
          </corecom:ActivityDateTime>
        </corecom:EBMTracking>
          <xsl:copy-of select="/corecom:Fault/corecom:FaultNotification"/>
           <corecom:MessageBatch>
            <xsl:copy-of select="$EBMHeaderVariable/corecom:MessageBatch/corecom:ID"/>
            <xsl:copy-of select="$EBMHeaderVariable/corecom:MessageBatch/corecom:Name"/>
            <corecom:StatusCode>Failed</corecom:StatusCode>
            <corecom:ResponseMessage/>
        </corecom:MessageBatch>
      </corecom:EBMHeader>
     
         <xsl:for-each select="$EBMDataAreaVariable/coreeboitem:DataArea">
      <coreeboitem:DataArea>
         <coreeboitem:SyncItemListResponse>
             <xsl:copy-of select="coreeboitem:SyncItemList/corecom:ItemIdentification"/>
             <xsl:copy-of select="coreeboitem:SyncItemList/corecomEBO:InventoryLocation"/> 
         </coreeboitem:SyncItemListResponse>
      </coreeboitem:DataArea>
      </xsl:for-each>
       </coreeboitem:SyncItemListResponseEBM>
  </xsl:template>
  
  
  
    
  <xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>  
  </xsl:template>
  
  
</xsl:stylesheet>
