<?xml version = '1.0' encoding = 'UTF-8'?>
<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
<mapSources>
<source type="XSD">
<schema location="oramds:/apps/AIAMetaData/AIAComponents/EnterpriseObjectLibrary/Core/EBO/Item/V2/ItemEBM.xsd"/>
<rootElement name="SyncItemListEBM" namespace="http://xmlns.oracle.com/EnterpriseObjects/Core/EBO/Item/V2"/>
</source>
</mapSources>
<mapTargets>
<target type="WSDL">
<schema location="oramds:/apps/AIAMetaData/AIAComponents/ApplicationObjectLibrary/Siebel/V1/wsdls/SWIPromotionIntegrationIO.wsdl"/>
<rootElement name="SWIPromotionUpsert_Input" namespace="http://siebel.com/asi/SWIPromotionIntegration/"/>
</target>
</mapTargets>
<!-- GENERATED BY ORACLE XSL MAPPER 10.1.3.4.0(build 080718.0645) AT [SUN JUL 26 08:49:17 IST 2009]. -->?><xsl:stylesheet version="1.0" xmlns:xsdLocal="http://www.siebel.com/xml/SWIPromotionIntegrationIO" xmlns:coreEBOcust="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/CommonEBO/V1" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:ns0="http://xmlns.oracle.com/EnterpriseObjects/Core/EBO/Item/V2" xmlns:coreeboitem="http://xmlns.oracle.com/EnterpriseObjects/Core/EBO/Item/V2" xmlns:ehdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.esb.server.headers.ESBHeaderFunctions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:svcdoc="http://xmlns.oracle.com/Services/Documentation/V1" xmlns:corecomEBO="http://xmlns.oracle.com/EnterpriseObjects/Core/CommonEBO/V1" xmlns:wsa="http://schemas.xmlsoap.org/ws/2003/03/addressing" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:ns1="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/CommonEBO/V1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:coreitemcust="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/EBO/Item/V2" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xacml-context="urn:oasis:names:tc:xacml:2.0:context:schema:cd:04" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:corecomcust="http://xmlns.oracle.com/EnterpriseObjects/Core/Custom/Common/V2" xmlns:tns="http://siebel.com/asi/SWIPromotionIntegration/" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:xacml="urn:oasis:names:tc:xacml:2.0:policy:schema:cd:04" xmlns:corecom="http://xmlns.oracle.com/EnterpriseObjects/Core/Common/V2" xmlns:aia="http://www.oracle.com/XSL/Transform/java/oracle.apps.aia.core.xpath.AIAFunctions" exclude-result-prefixes="xsl ns0 xsd svcdoc corecomEBO wsa ns1 coreitemcust xacml-context corecomcust xacml corecom xsdLocal soap soapenc tns bpws ehdr hwf xp20 xref ora ids orcl" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue">
	<xsl:include href="XformUDAInterfaceCommsSiebelPromotionEBMToABM.xsl"/>
	<xsl:include href="xformSyncItemListEBMToSiebelPromotionABM_Custom.xsl"/>
	<xsl:param name="BatchName"/>
	<xsl:param name="SystemID"/>
	<xsl:variable name="XREFSourceCol" select="$SystemID"/>
	<xsl:variable name="XREFTargetCol">
		<xsl:value-of select='"COMMON"'/>
	</xsl:variable>
	<xsl:variable name="OperationType" select="aia:getServiceProperty('{http://xmlns.oracle.com/ABCSImpl/Siebel/Core/SyncProductSiebelProvABCSImpl/V1}SyncProductSiebelProvABCSImpl','OPERATION_TYPE',false())"/>
	<xsl:variable name="UCTFormatEnabled" select="aia:getServiceProperty('{http://xmlns.oracle.com/ABCSImpl/Siebel/Core/SyncProductSiebelProvABCSImpl/V1}SyncProductSiebelProvABCSImpl','UTC_FORMAT_ENABLE',false())"/>
	<xsl:template match="/">
		<tns:SWIPromotionUpsert_Input>
			<tns:SyncChild>
				<xsl:value-of select="$OperationType"/>
			</tns:SyncChild>
			<xsdLocal:ListOfSwipromotionIntegrationio>
				<xsdLocal:SwiPromotionIntegrationVbc>
					<xsdLocal:WorkspaceName>
						<xsl:value-of select="$BatchName"/>
					</xsdLocal:WorkspaceName>
					<xsdLocal:WorkspaceReuseFlag>Y</xsdLocal:WorkspaceReuseFlag>
					<xsdLocal:ListOfSwiPromotionVbc>
						<xsl:for-each select="/coreeboitem:SyncItemListEBM/coreeboitem:DataArea/coreeboitem:SyncItemList">
							<xsl:variable name="DataArea_Var" select="."/>
							<xsdLocal:SwiPromotionVbc>
								<!--Changes for global_identifier to be sent to Siebel starts by Ashish Chauhan-->
								<xsl:variable name="EntityType">
									<xsl:value-of select="corecomEBO:EntityTypeCode"/>
								</xsl:variable>
								<xsl:if test="$EntityType='PROMOTION' and corecom:ItemIdentification/corecom:GTIN!= ''">
									<xsdLocal:GlobalProductIdentifier>
										<xsl:value-of select="corecom:ItemIdentification/corecom:GTIN"/>
									</xsdLocal:GlobalProductIdentifier>
								</xsl:if>
								<!--Changes for global_identifier to be sent to Siebel ends by Ashish Chauhan-->
								<xsdLocal:Id>
									<xsl:value-of select='xref:lookupXRef("oramds:/apps/AIAMetaData/xref/ITEM_ITEMID.xref",$XREFTargetCol,corecom:ItemIdentification/corecom:BusinessComponentID,$XREFSourceCol,false())'/>
								</xsdLocal:Id>
								<xsdLocal:Description>
									<xsl:value-of select="corecomEBO:Description"/>
								</xsdLocal:Description>
								<xsdLocal:Name>
									<xsl:value-of select="corecomEBO:Name"/>
								</xsdLocal:Name>
								<xsdLocal:PrimaryOrganizationId>
									<xsl:value-of select='xref:lookupXRef("oramds:/apps/AIAMetaData/xref/ORGANIZATION_ID.xref",$XREFTargetCol,corecom:ItemIdentification/corecom:ContextID[@schemeID="OPERATING_UNIT_ID"],$XREFSourceCol,true())'/>
								</xsdLocal:PrimaryOrganizationId>
								<!-- Start ARFT Changes-->
								<xsdLocal:TSNonSuspendFlag>
									<xsl:choose>
										<xsl:when test="corecomEBO:Custom/coreEBOcust:TSNonSuspendFlag = 'Y'">
											<xsl:text>Y</xsl:text>
										</xsl:when>
										<xsl:otherwise>
											<xsl:text>N</xsl:text>
										</xsl:otherwise>
									</xsl:choose>
								</xsdLocal:TSNonSuspendFlag>
								<!-- END ARFT Changes -->
								<!-- Start DI-1894 changes for siebel by Surendra on 05/06/2017 -->
								<xsl:if test="corecomEBO:Custom/coreEBOcust:TSReportFlag != ''">
									<xsdLocal:TSReportFlag>
										<xsl:choose>
											<xsl:when test="corecomEBO:Custom/coreEBOcust:TSReportFlag = 'Y'">
												<xsl:text>Y</xsl:text>
											</xsl:when>
											<xsl:otherwise>
												<xsl:text>N</xsl:text>
											</xsl:otherwise>
										</xsl:choose>
									</xsdLocal:TSReportFlag>
								</xsl:if>
								<!-- End DI-1894 changes for siebel by Surendra on 17/05/2017 -->
								<!-- Start DI-2184 changes in AIA for Siebel by Ashwath Prabhu on 27/07/2017 -->
								<xsl:if test="corecomEBO:Custom/coreEBOcust:TSTransferFlag != ''">
									<xsdLocal:TSTransferFlag>
										<xsl:choose>
											<xsl:when test="corecomEBO:Custom/coreEBOcust:TSTransferFlag = 'Y'">
												<xsl:text>Y</xsl:text>
											</xsl:when>
											<xsl:otherwise>
												<xsl:text>N</xsl:text>
											</xsl:otherwise>
										</xsl:choose>
									</xsdLocal:TSTransferFlag>
								</xsl:if>
								<!-- End DI-2184 changes in AIA for Siebel by Ashwath Prabhu on 27/07/2017 -->
								<!-- Start DI-1882  by surendra M-->
								<xsl:if test="corecomEBO:Custom/coreEBOcust:TSMoveFlag!= ''">
									<xsdLocal:TSMoveFlag>
										<xsl:choose>
											<xsl:when test="corecomEBO:Custom/coreEBOcust:TSMoveFlag = 'Y'">
												<xsl:text>Y</xsl:text>
											</xsl:when>
											<xsl:otherwise>
												<xsl:text>N</xsl:text>
											</xsl:otherwise>
										</xsl:choose>
									</xsdLocal:TSMoveFlag>
								</xsl:if>
								<!-- End DI-1882  by surendra M-->
								<!-- Start MDU-376 changes in AIA for R18.2 by Ashwath Prabhu on 27/11/2017-->
								<xsl:variable name="TSMDUServiceTypeVar" select="corecomEBO:Custom/coreEBOcust:TSMDUServiceType"/>
								<xsl:if test="$TSMDUServiceTypeVar != '' ">
									<xsdLocal:TSMDUServiceType>
										<xsl:value-of select="$TSMDUServiceTypeVar"/>
									</xsdLocal:TSMDUServiceType>
								</xsl:if>
								<!-- End MDU-376 changes in AIA for R18.2 by Ashwath Prabhu on 27/11/2017-->
								<!-- Start code merge R1.3 Drop 3 changes TSProductLine Aug 14th 2015 Surendra -->
								<xsl:variable name="ProductLineVar" select="corecomEBO:ItemClassification/corecomEBO:ClassificationCode[@listID='Product_Line']"/>
								<xsl:if test="$ProductLineVar != '' ">
									<xsdLocal:TSProductLine>
										<xsl:value-of select="$ProductLineVar"/>
									</xsdLocal:TSProductLine>
								</xsl:if>
								<!-- End code merge R1.3 Drop 3 changes TSProductLine Aug 13th 2015 14th 2015 Surendra -->
								<xsl:if test="corecomEBO:ItemServiceCharacteristics/corecomEBO:TrackInstanceIndicator != ''">
									<xsdLocal:TrackAsAsset>
										<xsl:choose>
											<xsl:when test="corecomEBO:ItemServiceCharacteristics/corecomEBO:TrackInstanceIndicator = 'true'">
												<xsl:text>Y</xsl:text>
											</xsl:when>
											<xsl:otherwise>
												<xsl:text>N</xsl:text>
											</xsl:otherwise>
										</xsl:choose>
									</xsdLocal:TrackAsAsset>
								</xsl:if>
								<xsdLocal:ListOfSwiProductCompatibility-SubjectVbc>
									<xsl:for-each select="corecomEBO:RelatedItem">
										<xsl:variable name="ObjectProductVar" select="corecomEBO:RelationshipCode[@listID='Object_Product']"/>
										<xsl:variable name="ObjectProductIdVar" value="corecom:Identification/corecom:ID[@@SchemeID='Object_Product']"/>
										<xsl:variable name="ObjectProductId">
											<xsl:if test="$ObjectProductIdVar  != ''">
												<xsl:value-of select='xref:lookupXRef("oramds:/apps/AIAMetaData/xref/ITEM_ITEMID.xref",$XREFTargetCol,$ObjectProductIdVar,$XREFSourceCol,false())'/>
											</xsl:if>
										</xsl:variable>
										<xsl:for-each select="corecomEBO:ItemCompatibility">
											<xsdLocal:SwiProductCompatibility-SubjectVbc>
												<xsdLocal:Id>
													<xsl:value-of select="corecom:Identification/corecom:ContextID"/>
												</xsdLocal:Id>
												<xsdLocal:MatrixName>
													<xsl:value-of select="corecomEBO:GroupName"/>
												</xsdLocal:MatrixName>
												<xsdLocal:EndDate>
													<xsl:if test="corecom:EffectiveTimePeriod/corecom:EndDateTime != ''">
														<xsl:call-template name="ConvertEBODateTime">
															<xsl:with-param name="EBODateTime" select="corecom:EffectiveTimePeriod/corecom:EndDateTime"/>
														</xsl:call-template>
													</xsl:if>
												</xsdLocal:EndDate>
												<xsdLocal:StartDate>
													<xsl:if test="corecom:EffectiveTimePeriod/corecom:StartDateTime != ''">
														<xsl:call-template name="ConvertEBODateTime">
															<xsl:with-param name="EBODateTime" select="corecom:EffectiveTimePeriod/corecom:StartDateTime"/>
														</xsl:call-template>
													</xsl:if>
												</xsdLocal:StartDate>
												<xsdLocal:RuleId>
													<xsl:value-of select="corecom:Identification/corecom:ContextID"/>
												</xsdLocal:RuleId>
												<xsdLocal:Object-Product>
													<xsl:value-of select="$ObjectProductVar"/>
												</xsdLocal:Object-Product>
												<xsdLocal:Object-ProductClass>
													<xsl:value-of select="corecom:ClassificationReference/corecom:Name"/>
												</xsdLocal:Object-ProductClass>
												<xsdLocal:Object-ProductLine>
													<xsl:value-of select="corecom:ClassificationReference/corecom:ClassificationCodeIdentification/corecom:ContextID[@schemeID='Object_Product_Line']"/>
												</xsdLocal:Object-ProductLine>
												<xsdLocal:Type>
													<xsl:value-of select='dvm:lookupValue("oramds:/apps/AIAMetaData/dvm/RULE_TYPE.dvm",$DVMTargetCol,corecomEBO:TypeCode,$DVMSourceCol,corecomEBO:TypeCode)'/>
												</xsdLocal:Type>
											</xsdLocal:SwiProductCompatibility-SubjectVbc>
										</xsl:for-each>
									</xsl:for-each>
								</xsdLocal:ListOfSwiProductCompatibility-SubjectVbc>
								<xsl:for-each select="corecomEBO:ItemSpecificationGroup/corecom:SpecificationGroup">
									<xsl:call-template name="ProcessAttributeGroupUDA">
										<xsl:with-param name="Name" select="corecom:Name"/>
										<xsl:with-param name="DataArea" select="$DataArea_Var"/>
									</xsl:call-template>
								</xsl:for-each>
							</xsdLocal:SwiPromotionVbc>
						</xsl:for-each>
					</xsdLocal:ListOfSwiPromotionVbc>
				</xsdLocal:SwiPromotionIntegrationVbc>
			</xsdLocal:ListOfSwipromotionIntegrationio>
		</tns:SWIPromotionUpsert_Input>
	</xsl:template>
	<!-- Convert DateTime template Convert EBO DateTime format to Siebel -->
	<xsl:template name="ConvertEBODateTime">
		<xsl:param name="EBODateTime" select="."/>
		<xsl:choose>
			<xsl:when test="$UCTFormatEnabled = 'N'">
				<xsl:value-of select='normalize-space(concat(string(substring($EBODateTime,6.0,2.0)),"/",string(substring($EBODateTime,9.0,2.0)),"/",string(substring($EBODateTime,1.0,4.0))," ",string(substring($EBODateTime,12.0,8.0))))'/>
			</xsl:when>
			<xsl:otherwise>
				<xsl:value-of select="$EBODateTime"/>
			</xsl:otherwise>
		</xsl:choose>
	</xsl:template>
</xsl:stylesheet>